plugins {
    id 'base'
    id 'org.springframework.boot' version '2.5.4'
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'
}

description = """ SpringBoot OCPP 1.6 JSON """

ext {
    springVersion = '5.3.9'
    springBootVersion = '2.5.4'
    lombokVersion = '1.18.20'
}


allprojects {
    group = 'ge.devel.ocpp'
    version = '0.0.1-SNAPSHOT'

    apply plugin: 'java'
    apply plugin: 'idea'

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }

    repositories {
        mavenLocal()
        mavenCentral()
    }
}

subprojects {
    sourceCompatibility = 11
    targetCompatibility = 11

    dependencies {
        annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
        implementation "org.projectlombok:lombok:${lombokVersion}"
        testAnnotationProcessor "org.projectlombok:lombok:${lombokVersion}"

        testImplementation 'junit:junit:4.12'
    }
}

project('app') {

    dependencies {
        implementation "org.springframework.boot:spring-boot-starter-web:${springBootVersion}"

        testImplementation "org.springframework.boot:spring-boot-starter-test:${springBootVersion}"
    }
}

project('ws:ws-api') {
    bootJar { enabled = false }
    jar { enabled = true }

    dependencies {
        implementation group: 'eu.chargetime.ocpp', name: 'common', version: '1.0'
        implementation group: 'eu.chargetime.ocpp', name: 'v1_6', version: '1.0.1'
        implementation group: 'eu.chargetime.ocpp', name: 'OCPP-J', version: '1.0.1'
    }
}

project('ws:ws-impl') {
    bootJar { enabled = false }
    jar { enabled = true }

    dependencies {
        implementation project(':ws:ws-api')

        implementation "org.springframework:spring-context:${springVersion}"

        implementation group: 'eu.chargetime.ocpp', name: 'common', version: '1.0'
        implementation group: 'eu.chargetime.ocpp', name: 'v1_6', version: '1.0.1'
        implementation group: 'eu.chargetime.ocpp', name: 'OCPP-J', version: '1.0.1'

    }
}
